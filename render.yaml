services:
  - name: task-service
    type: web
    env: java
    rootDir: task-service
    buildCommand: ./mvnw -DskipTests package
    startCommand: java -jar target/task-service-0.0.1-SNAPSHOT.jar
    envVars:
      - key: SPRING_DATASOURCE_URL
        sync: false
      - key: SPRING_DATASOURCE_USERNAME
        sync: false
      - key: SPRING_DATASOURCE_PASSWORD
        sync: false
      - key: CORS_ALLOWED_ORIGIN
        value: https://todo-web.onrender.com
    healthCheckPath: /actuator/health

  - name: todo-web
    type: static_site
    rootDir: todo-web
    buildCommand: npm install && npm run build
    publishPath: dist/todo-web/browser
    envVars:
      - key: API_BASE_URL
        value: https://task-service.onrender.com
